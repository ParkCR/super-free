name: Refresh Cache on File Changes

on:
  push:
    paths:
      - '小火箭自定义配置/**'
  workflow_dispatch:  # 允许手动触发工作流

jobs:
  refresh-cache:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Refresh jsDelivr cache for all files
        run: |
          # Wait a few seconds to ensure changes are propagated
          sleep 10
          # 刷新小火箭自定义配置目录下的所有文件
          curl "https://purge.jsdelivr.net/gh/${{github.repository}}/小火箭自定义配置/*"
          
          # 如果需要刷新特定文件类型，可以取消下面的注释并修改
          # curl "https://purge.jsdelivr.net/gh/${{github.repository}}/小火箭自定义配置/*.conf"
          # curl "https://purge.jsdelivr.net/gh/${{github.repository}}/小火箭自定义配置/*.txt"
